{% extends 'blog/base_blog.html' %}
{% block title %}
  Post:
{% endblock %}
{% block content %}
<h1 class="text-center">Post "{{post.title}}"</h1>
<div class="card text-white bg-dark mb-3 container col-4" >
  <div class="card-header">{{post.author}}</div>
  <div class="card-body">
    <h5 class="card-title">{{post.title}}</h5>
    <p class="card-text">{{post.body}}</p>
  </div>
  {% if request.user.is_authenticated%}
  <form action="{{post.get_absolute_url}}" method="post" id = "comm">
    {% csrf_token %}
    {{form.text}}
    <button type="submit" name="button" class="btn btn-outline-light mb-3">Add comment</button>
  </form>
  {% else %}
    <div class="card-title">
      <span>If you want to add a comment please <a href="{% url 'login_view_url' %}?next={{request.path}}#comm">log in</a> or <a href="{% url 'register_view_url' %}?next={{request.path}}#comm">sign up</a></span>
    </div>
  {% endif %}


  {% for comm in post.comment_set.all %}
  <div class="media">
    <div class="media-body">
    <h5 class="mt-0 d-flex justify-content-between">
      <span>{{comm.author}}</span>
      <span>{{comm.pub_date}}</span>
    </h5>
    {{comm.text}}
    <hr style="border: 1px solid white;" />
</div>
</div>
  {% endfor %}

</div>
{% endblock %}
